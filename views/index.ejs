<!DOCTYPE html>
<html lang="en">
    <% include head.ejs %>
    <body>
        <% include navbar.ejs %>
		<div class="row">
			<div class="col-md-6">
				<canvas id="myChart" width="100" height="50"></canvas>
				<script>
				$(document).ready(function(){
					$.ajax({
					    url: 'http://127.0.0.1:3000/api/group/-1001147904042',
					    type: 'GET',
					    error: function(xhr) {
					      alert('Ajax request 發生錯誤');
					    },
					    success: function(response) {
							var ctx = document.getElementById("myChart");
						  	var labelmembers=[],datamembers=[];
							for(var i=0;i<response.length;i++){
								var inlabel = false;
								for(var j=0;j<labelmembers.length;j++){
									if(response[i].user==labelmembers[j]){
										inlabel=true;
										datamembers[j]=datamembers[j]+1;
									}
								}
								if(inlabel==false){
									labelmembers.push(response[i].user);
									datamembers.push(1);
									//console.log(datamembers);
								}
							}

			  				var myChart = new Chart(ctx, {
			  				    type: 'bar',
			  				    data: {
			  				        labels: labelmembers,
			  				        datasets: [{
			  				            label: '# of text',
			  				            data: datamembers,
			  				            backgroundColor: [
			  				                'rgba(255, 99, 132, 0.2)',
			  				                'rgba(54, 162, 235, 0.2)',
			  				                'rgba(255, 206, 86, 0.2)',
			  				                'rgba(75, 192, 192, 0.2)',
			  				                'rgba(153, 102, 255, 0.2)',
			  				                'rgba(255, 159, 64, 0.2)',
											'rgba(255, 99, 132, 0.2)',
			  				                'rgba(54, 162, 235, 0.2)',
			  				                'rgba(255, 206, 86, 0.2)',
			  				                'rgba(75, 192, 192, 0.2)',
			  				                'rgba(153, 102, 255, 0.2)',
			  				                'rgba(255, 159, 64, 0.2)'
			  				            ],
			  				            borderColor: [
			  				                'rgba(255,99,132,1)',
			  				                'rgba(54, 162, 235, 1)',
			  				                'rgba(255, 206, 86, 1)',
			  				                'rgba(75, 192, 192, 1)',
			  				                'rgba(153, 102, 255, 1)',
			  				                'rgba(255, 159, 64, 1)',
											'rgba(255,99,132,1)',
			  				                'rgba(54, 162, 235, 1)',
			  				                'rgba(255, 206, 86, 1)',
			  				                'rgba(75, 192, 192, 1)',
			  				                'rgba(153, 102, 255, 1)',
			  				                'rgba(255, 159, 64, 1)'
			  				            ],
			  				            borderWidth: 1
			  				        }]
			  				    },
			  				    options: {
			  				        scales: {
			  				            yAxes: [{
			  				                ticks: {
			  				                    beginAtZero:true
			  				                }
			  				            }]
			  				        }
			  				    }
			  				});

					    }
					  });

				});

				</script>
			</div>
		</div>

    </body>
    <% include footer.ejs %>
</html>
